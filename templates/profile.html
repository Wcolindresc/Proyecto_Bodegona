{% extends "base.html" %}
{% block title %}Mi perfil{% endblock %}
{% block content %}
  <h1 class="text-xl font-semibold mt-6">Direcciones</h1>
  <form method="post" action="{{ url_for('profile_add_address') }}" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 bg-white border p-4 rounded">
    <input class="border rounded px-3 py-2" name="full_name" placeholder="Nombre completo">
    <input class="border rounded px-3 py-2" name="phone" placeholder="Teléfono">
    <input class="border rounded px-3 py-2 md:col-span-2" name="line1" placeholder="Dirección 1">
    <input class="border rounded px-3 py-2 md:col-span-2" name="line2" placeholder="Dirección 2 (opcional)">
    <input class="border rounded px-3 py-2" name="city" placeholder="Ciudad">
    <input class="border rounded px-3 py-2" name="region" placeholder="Departamento">
    <input class="border rounded px-3 py-2" name="postal_code" placeholder="Código postal">
    <input class="border rounded px-3 py-2" name="country" placeholder="País" value="GT">
    <label class="flex items-center gap-2"><input type="checkbox" name="is_default"> Predeterminada</label>
    <div class="md:col-span-2"><button class="px-4 py-2 bg-blue-600 text-white rounded">Guardar</button></div>
  </form>
  <div class="mt-6 grid md:grid-cols-2 gap-4">
    {% for a in addresses %}
      <div class="bg-white border rounded p-4">
        <div class="font-medium">{{ a.full_name }} {% if a.is_default %}<span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded">Default</span>{% endif %}</div>
        <div class="text-sm text-gray-600">{{ a.phone }}</div>
        <div class="text-sm text-gray-600">{{ a.line1 }} {{ a.line2 }}</div>
        <div class="text-sm text-gray-600">{{ a.city }}, {{ a.region }} {{ a.postal_code }}, {{ a.country }}</div>
        <form method="post" action="{{ url_for('profile_delete_address', aid=a.id) }}" class="mt-3">
          <button class="px-3 py-2 bg-red-600 text-white rounded">Eliminar</button>
        </form>
      </div>
    {% else %}
      <div class="text-gray-500">Sin direcciones aún.</div>
    {% endfor %}
  </div>
{% endblock %}
